{"remainingRequest":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/src/views/Mafia.vue?vue&type=style&index=0&id=c55b31c0&scoped=true&lang=css&","dependencies":[{"path":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/src/views/Mafia.vue","mtime":1576672475728},{"path":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hyogeon/IdeaProjects/heaven-games/src/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCiNtZXNzYWdlIHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQoKI21lc3NhZ2UtYXJlYSB7CiAgICBmb250LWZhbWlseTogbW9ub3NwYWNlOwogICAgYm9yZGVyOiBncm9vdmUgd2hpdGU7CiAgICBvdmVyZmxvdzogc2Nyb2xsOwogICAgaGVpZ2h0OiA4NSU7CiAgICB3aWR0aDogNTUwcHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsKICAgIG9wYWNpdHk6IDAuNzsKICAgIG1hcmdpbi10b3A6IDUlOwogICAgY29sb3I6d2hpdGU7CiAgICBtYXgtd2lkdGg6IDE1MCU7CiAgICBib3JkZXItcmFkaXVzOiAxNXB4Owp9CgojbWVzc2FnZS1mb290ZXIgewogICAgZm9udC1mYW1pbHk6IG1vbm9zcGFjZTsKICAgIGhlaWdodDogMTAlOwogICAgYm9yZGVyOiBncm9vdmUgd2hpdGU7CiAgICB3aWR0aDogNTUwcHg7CiAgICBwYWRkaW5nOiAwOwogICAgYm9yZGVyLXJhZGl1czogMTVweDsKfQoKI21lc3NhZ2UtY29udGVudCB7CiAgICB3aWR0aDogOTAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgYmFja2dyb3VuZC1jb2xvcjogIzdmN2Y3ZjsKICAgIHBhZGRpbmc6IDA7CiAgICBib3JkZXI6IDA7CiAgICBib3JkZXItcmFkaXVzOiAxNXB4OwogICAgY29sb3I6IHdoaXRlOwp9Cgojc2VuZC1tZXNzYWdlIHsKICAgIHdpZHRoOiAxMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzOwogICAgcGFkZGluZzogMDsKICAgIGJvcmRlcjogMDsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7Cn0K"},{"version":3,"sources":["Mafia.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Mafia.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <v-container id=\"mafia-app\" fluid>\n        <v-row>\n            <v-col cols=\"6\">\n                <v-row align='center' justify='center'>\n                    <MafiaCitizen :citizen=\"citizen\" :key=\"citizen.name\" v-for='citizen in citizens'/>\n                </v-row>\n            </v-col>\n            <div>\n                <div id=\"message-area\">\n                </div>\n                <div id=\"message-footer\">\n                    <input type=\"text\" id=\"message-content\">\n                    <input type=\"submit\" id=\"send-message\" value=\"전송\">\n                </div>\n            </div>\n        </v-row>\n    </v-container>\n</template>\n\n\n<script>\n    import MafiaCitizen from \"../components/MafiaCitizen\";\n    import SockJS from \"sockjs-client\";\n    import Stomp from \"webstomp-client\";\n\n    export default {\n        name: 'Mafia',\n        components: {\n            MafiaCitizen,\n        },\n        methods: {\n            messageTemplate(mafiaChatMessage) {\n                if(mafiaChatMessage.userId === this.userId){\n                    return `<div id=\"message\" style=\"text-align: right\">\n                            <span>나: ${mafiaChatMessage.message}</span>\n                    </div>`;\n                }\n                return `<div id=\"message\" style=\"text-align: left\">\n                            <span>${mafiaChatMessage.name}: ${mafiaChatMessage.message}</span>\n                    </div>`\n            },\n          sendMessage: function() {\n              const game = this;\n              const content = document.getElementById(\"message-content\").value;\n              game.client.send('/app/rooms/' + this.roomId + '/mafia/chat', content);\n              if (content.length != 0) {\n                  document.getElementById(\"message-content\").value = \"\";\n              }\n          },\n          addMessage: function(mafiaChatMessage) {\n                const messageArea = document.getElementById(\"message-area\");\n                messageArea.insertAdjacentHTML(\"beforeend\", this.messageTemplate(mafiaChatMessage));\n                messageArea.scrollTop = messageArea.scrollHeight;\n              }\n        },\n        data() {\n            return {\n                citizens: [{name: '비모', occupation: '마피아', src: require('../assets/p1.png')},\n                    {name: '쿠기', occupation: '마피아', src: require('../assets/p2.png')},\n                    {name: '제이엠', occupation: '마피아', src: require('../assets/p3.png')},\n                    {name: '올라프', occupation: '마피아', src: require('../assets/p4.png')},\n                    {name: '코맥', occupation: '마피아', src: require('../assets/p5.png')},\n                    {name: '맥코', occupation: '마피아', src: require('../assets/p6.png')},\n                    {name: '코맥코', occupation: '마피아', src: require('../assets/p7.png')},\n                    {name: '맥코맥', occupation: '마피아', src: require('../assets/p8.png')},\n                    {name: '쿠기쿠', occupation: '마피아', src: require('../assets/p9.png')},\n                    {name: '반', occupation: '마피아', src: require('../assets/p10.png')}, // 테스트 데이터\n                ],\n                roomId: this.$route.params.id,\n                client: {},\n                userId: ''\n            }\n        },\n        created() {\n            this.client = Stomp.over(new SockJS('/websocket'));\n            const game = this;\n            game.client.connect({}, function() {\n                game.client.send('/app/rooms/' + game.roomId + '/mafia' );\n                game.client.subscribe('/user/queue/rooms/' + game.roomId + '/mafia/occupation', function (response) {\n                    const mafiaOccupationMessage = JSON.parse(response.body).body;\n                    game.userId = mafiaOccupationMessage.userId;\n                    alert(mafiaOccupationMessage.occupation);\n                });\n                game.client.subscribe('/topic/rooms/' + game.roomId + '/mafia/chat', function (response) {\n                    const mafiaChatMessage = JSON.parse(response.body).body;\n\n                    window.console.log(mafiaChatMessage);\n                    game.addMessage(mafiaChatMessage);\n                });\n            });\n        },\n        mounted() {\n            const game = this;\n            document.querySelector('#send-message').addEventListener(\"click\", game.sendMessage);\n            document.querySelector('#message-content').addEventListener('keyup',function(e){\n                if (e.keyCode === 13) {\n                    game.sendMessage();\n                }\n            });\n        },\n        destroyed() {\n            this.client.disconnect();\n            //TODO: 마피아 참가자 나가는 경우\n        }\n    }\n</script>\n\n<style scoped>\n    #message {\n        display: inline-block;\n    }\n\n    #message-area {\n        font-family: monospace;\n        border: groove white;\n        overflow: scroll;\n        height: 85%;\n        width: 550px;\n        background-color: black;\n        opacity: 0.7;\n        margin-top: 5%;\n        color:white;\n        max-width: 150%;\n        border-radius: 15px;\n    }\n\n    #message-footer {\n        font-family: monospace;\n        height: 10%;\n        border: groove white;\n        width: 550px;\n        padding: 0;\n        border-radius: 15px;\n    }\n\n    #message-content {\n        width: 90%;\n        height: 100%;\n        background-color: #7f7f7f;\n        padding: 0;\n        border: 0;\n        border-radius: 15px;\n        color: white;\n    }\n\n    #send-message {\n        width: 10%;\n        height: 100%;\n        background-color: #333333;\n        padding: 0;\n        border: 0;\n        color: white;\n        border-radius: 15px;\n    }\n</style>"]}]}